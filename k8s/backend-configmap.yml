apiVersion: v1
kind: ConfigMap
metadata:
  name: urbind-query-mechanism-backend-config
  namespace: default
data:
  PORT: "8000"
  RUNS_DIR: "/data/output"
  MARKDOWN_DIR: "/app/documents"
  CHROMA_PERSIST_PATH: "/data/chroma"
  CHROMA_COLLECTION_NAME: "markdown_chunks"
  INDEX_MANIFEST_PATH: "/data/chroma/index_manifest.json"
  VECTOR_STORE_ENABLED: "true"
  VECTOR_STORE_AUTO_UPDATE_ON_RUN: "false"
  VECTOR_STORE_RETRIEVAL_MAX_DISTANCE: "1.0"
  VECTOR_STORE_RETRIEVAL_MAX_CHUNKS_PER_CITY_QUERY: "60"
  VECTOR_STORE_RETRIEVAL_FALLBACK_MIN_CHUNKS_PER_CITY_QUERY: "20"
  VECTOR_STORE_RETRIEVAL_MAX_CHUNKS_PER_CITY: "300"
  VECTOR_STORE_CONTEXT_WINDOW_CHUNKS: "0"
  VECTOR_STORE_TABLE_CONTEXT_WINDOW_CHUNKS: "1"
  MARKDOWN_BATCH_MAX_CHUNKS: "16"
  MARKDOWN_BATCH_OVERHEAD_TOKENS: "600"
  LLM_CONFIG_PATH: "/app/llm_config.yaml"
  CITY_GROUPS_PATH: "/app/backend/api/assets/city_groups.json"
  OPENROUTER_BASE_URL: "https://openrouter.ai/api/v1"
  API_RUN_WORKERS: "2"
  CHAT_PROMPT_TOKEN_CAP: "250000"
  CHAT_PROVIDER_TIMEOUT_SECONDS: "50"
  LOG_LEVEL: "INFO"
  API_CORS_ORIGINS: "https://urbind-query-mechanism.openearth.dev"
